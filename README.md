# RAG Search - –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∏—Å–∫–∞ –ø–æ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π

> –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∏—Å–∫–∞ –ø–æ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π –±–∞–∑–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –Ω–∞ –±–∞–∑–µ RAG (Retrieval-Augmented Generation)

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–û –ø—Ä–æ–µ–∫—Ç–µ](#–æ-–ø—Ä–æ–µ–∫—Ç–µ)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
- [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
- [–¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è –±–∞–∑–∞](#—Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è-–±–∞–∑–∞)
- [–î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#–¥–µ—Ç–∞–ª–∏-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
- [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
- [Roadmap](#roadmap)

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
python scripts/init_metadata_db.py
```

### 2. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
streamlit run src/app.py --server.port 8502
```

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –Ω–∞ `http://localhost:8502`
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤–æ –≤–∫–ª–∞–¥–∫—É **"üìÑ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤"**
3. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã (.docx, .md, .txt) —Å —Ç–µ–≥–∞–º–∏
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∫–ª–∞–¥–∫—É **"üîç –ü–æ–∏—Å–∫"** –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

---

## üìñ –û –ø—Ä–æ–µ–∫—Ç–µ

### –ò–¥–µ—è –ø—Ä–æ–µ–∫—Ç–∞

RAG Search - —ç—Ç–æ –ª–æ–∫–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏. –°–∏—Å—Ç–µ–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º –±—ã—Å—Ç—Ä–æ –Ω–∞—Ö–æ–¥–∏—Ç—å —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º, –∏—Å–ø–æ–ª—å–∑—É—è –ø–æ–Ω–∏–º–∞–Ω–∏–µ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –ø–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º.

### –ü—Ä–æ–±–ª–µ–º–∞, –∫–æ—Ç–æ—Ä—É—é —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç

**–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:**
- –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ç—Ä–∞—Ç—è—Ç –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –ø–æ–∏—Å–∫ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –≤ –±–æ–ª—å—à–æ–π –±–∞–∑–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ñ–æ—Ä–º—É–ª–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å –∏–Ω—ã–º–∏ —Å–ª–æ–≤–∞–º–∏
- –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Ä–∞–∑–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ (.docx, .md, .txt) —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–†–µ—à–µ–Ω–∏–µ:**
- –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –Ω–∞ –±–∞–∑–µ –Ω–µ–π—Ä–æ–Ω–Ω—ã—Ö —Å–µ—Ç–µ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –ª–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –±–µ–∑ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –æ–±–ª–∞–∫–æ
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫** - –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Å–º—ã—Å–ª–∞ –∑–∞–ø—Ä–æ—Å–∞, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤** - LLM —Å–æ–∑–¥–∞—ë—Ç —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞–π–¥–µ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚úÖ **–°–∏—Å—Ç–µ–º–∞ —Ç–µ–≥–æ–≤** - –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
‚úÖ **–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏, –ø–æ–º–µ—Ç–∫–∞ –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏, —É–¥–∞–ª–µ–Ω–∏–µ
‚úÖ **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞** - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏ –º–æ–¥–µ–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –æ—Ñ–ª–∞–π–Ω
‚úÖ **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã** - .docx, .md, .txt

### –¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è

- –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ (–ø–µ—Ä–≤–∞—è –ª–∏–Ω–∏—è)
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã —Å–∏—Å—Ç–µ–º 1–°
- –ò–Ω–∂–µ–Ω–µ—Ä—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–∞—Å—Å–æ–≤–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
- –ù–æ–≤—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ (–¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è)
- –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–∏ –æ—Ç–¥–µ–ª–æ–≤ —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∏

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û–±—â–∞—è —Å—Ö–µ–º–∞ —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ –≤–æ–ø—Ä–æ—Å
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Streamlit UI      ‚îÇ ‚óÑ‚îÄ‚îÄ –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   RAG Pipeline      ‚îÇ ‚óÑ‚îÄ‚îÄ –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
   ‚îå‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ       ‚îÇ
   ‚ñº       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇEmbed ‚îÇ  ‚îÇ   ChromaDB   ‚îÇ ‚óÑ‚îÄ‚îÄ –í–µ–∫—Ç–æ—Ä–Ω–∞—è –ë–î
‚îÇModel ‚îÇ  ‚îÇ   + HNSW     ‚îÇ
‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
   ‚îÇ             ‚îÇ
   ‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
   ‚ñº    ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  LLM (Qwen2.5)  ‚îÇ ‚óÑ‚îÄ‚îÄ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚ñº
   –û—Ç–≤–µ—Ç + –∏—Å—Ç–æ—á–Ω–∏–∫–∏
```

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π

| –ú–æ–¥—É–ª—å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ |
|--------|-----------|-----------|
| [src/config.py](src/config.py) | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã | Python |
| [src/embeddings.py](src/embeddings.py) | –†–∞–±–æ—Ç–∞ —Å –≤–µ–∫—Ç–æ—Ä–Ω—ã–º–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è–º–∏ | SentenceTransformers |
| [src/storage.py](src/storage.py) | –í–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | ChromaDB |
| [src/llm_client.py](src/llm_client.py) | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ | Ollama + Qwen2.5 |
| [src/docs_parser.py](src/docs_parser.py) | –ü–∞—Ä—Å–∏–Ω–≥ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ | python-docx, Pillow |
| [src/chunker.py](src/chunker.py) | –†–∞–∑–±–∏–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —á–∞–Ω–∫–∏ | Python |
| [src/rag_pipeline.py](src/rag_pipeline.py) | –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ RAG | Python |
| [src/metadata_manager.py](src/metadata_manager.py) | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ | SQLite, SQLAlchemy |
| [src/hybrid_search.py](src/hybrid_search.py) | –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ | BM25 + Vector Search |
| [src/app.py](src/app.py) | –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å | Streamlit |

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ src/                      # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ app.py               # Streamlit UI
‚îÇ   ‚îú‚îÄ‚îÄ rag_pipeline.py      # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ RAG
‚îÇ   ‚îú‚îÄ‚îÄ embeddings.py        # –ú–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ storage.py           # ChromaDB –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îú‚îÄ‚îÄ llm_client.py        # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Ollama
‚îÇ   ‚îú‚îÄ‚îÄ docs_parser.py       # –ü–∞—Ä—Å–∏–Ω–≥ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ chunker.py           # –†–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ —á–∞–Ω–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ metadata_manager.py  # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ hybrid_search.py     # –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫
‚îÇ   ‚îî‚îÄ‚îÄ config.py            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ docs/                # –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ images/              # –ò–∑–≤–ª–µ—á—ë–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ metadata.db          # SQLite –±–∞–∑–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ backups/             # –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏
‚îÇ
‚îú‚îÄ‚îÄ chroma_db/               # –í–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ ChromaDB
‚îÇ
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îî‚îÄ‚îÄ init_metadata_db.py  # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
‚îÇ
‚îú‚îÄ‚îÄ requirements.txt         # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îî‚îÄ‚îÄ README.md               # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

#### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–∞–π–ª —á–µ—Ä–µ–∑ Streamlit
   ‚Üì
2. docs_parser.parse_document(file_path, source_type)
   ‚Üí –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
   ‚Üì
3. –†–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ (–µ—Å–ª–∏ multi_instruction)
   ‚Üí ["–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è 1", "–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è 2", ...]
   ‚Üì
4. –î–ª—è –∫–∞–∂–¥–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:
   a) prepare_text_for_chunking(text, title)
      ‚Üí –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –≤ —Ç–µ–∫—Å—Ç
   b) chunker.split_text(text, max_length=2000)
      ‚Üí ["—á–∞–Ω–∫ 1", "—á–∞–Ω–∫ 2", ...]
   c) embeddings.encode(chunks)
      ‚Üí [[0.1, 0.2, ...], [0.3, 0.4, ...]]
   d) collection.add(documents, embeddings, metadatas)
      ‚Üí –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ ChromaDB
   e) metadata_manager.add_instruction(...)
      ‚Üí –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –≤ SQLite
   ‚Üì
5. –£—Å–ø–µ—Ö ‚úÖ
```

#### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–∏—Å–∫ (Query)

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –∑–∞–ø—Ä–æ—Å
   ‚Üì
2. RAGPipeline.query(user_query, top_k=5)
   ‚Üì
3. embeddings.encode([query])
   ‚Üí [0.5, 0.6, ...]
   ‚Üì
4. collection.query(query_embeddings, n_results=5)
   ‚Üí ChromaDB –∏—â–µ—Ç –ø–æ—Ö–æ–∂–∏–µ –≤–µ–∫—Ç–æ—Ä—ã
   ‚Üí {documents: [...], metadatas: [...], distances: [...]}
   ‚Üì
5. format_context(documents)
   ‚Üí –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ + –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
   ‚Üì
6. llm_client.generate_rag_answer(query, context)
   ‚Üí Ollama –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç
   ‚Üì
7. –í–æ–∑–≤—Ä–∞—Ç {answer, sources, images}
   ‚Üì
8. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ UI
```

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Python**: 3.10+
- **GPU**: –ù–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ (—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ CPU)
- **RAM**: –ú–∏–Ω–∏–º—É–º 8GB, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 16GB
- **–î–∏—Å–∫**: ~5GB (–º–æ–¥–µ–ª–∏ + –¥–∞–Ω–Ω—ã–µ)
- **–û–°**: Linux, Windows, macOS

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**

```bash
git clone <repo_url>
cd RAG_Search
```

2. **–°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è**

```bash
python -m venv .venv
source .venv/bin/activate  # Linux/macOS
.venv\Scripts\activate     # Windows
```

3. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –ø–∞–∫–µ—Ç–æ–≤**

```bash
pip install --upgrade pip
pip install -r requirements.txt
```

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```
streamlit>=1.20          # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
langchain>=0.0.400       # RAG —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
chromadb>=0.3.31         # –í–µ–∫—Ç–æ—Ä–Ω–∞—è –ë–î
sentence-transformers    # –ú–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
python-docx>=0.8.11      # –ü–∞—Ä—Å–∏–Ω–≥ Word
pillow>=9.0.0            # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
ollama>=0.1.0            # LLM –∫–ª–∏–µ–Ω—Ç
rank-bm25>=0.2.2         # –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫
sqlalchemy>=1.4          # ORM –¥–ª—è SQLite
```

4. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Ollama**

Ollama - –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è –∑–∞–ø—É—Å–∫–∞ LLM –º–æ–¥–µ–ª–µ–π.

**Linux:**
```bash
curl -fsSL https://ollama.com/install.sh | sh
```

**macOS:**
```bash
brew install ollama
```

**Windows:** –°–∫–∞—á–∞–π—Ç–µ —Å [ollama.com](https://ollama.com)

5. **–ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ Qwen2.5**

```bash
ollama pull qwen2.5:14b-instruct-q4_K_M
```

**–ú–æ–¥–µ–ª—å:** 14 –º–∏–ª–ª–∏–∞—Ä–¥–æ–≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –∫–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏—è 4-bit (Q4_K_M)
**–†–∞–∑–º–µ—Ä:** ~8GB
**VRAM:** ~8GB (–∏–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ CPU —Å RAM)

6. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**

```bash
python scripts/init_metadata_db.py
```

–°–æ–∑–¥–∞—ë—Ç:
- `data/metadata.db` - SQLite –±–∞–∑–∞
- –¢–∞–±–ª–∏—Ü—ã: instructions, tags, instruction_tags, instruction_images, instruction_history
- 10 –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Ç–µ–≥–æ–≤

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ [src/config.py](src/config.py):

```python
# –ú–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
EMBEDDING_MODEL_NAME = "intfloat/multilingual-e5-large"
# 1024 –∏–∑–º–µ—Ä–µ–Ω–∏—è, ~560M –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
# –°–∫–∞—á–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —á–∞–Ω–∫–∏–Ω–≥–∞
CHUNK_SIZE_TOKENS = 500        # ~2000 —Å–∏–º–≤–æ–ª–æ–≤
CHUNK_OVERLAP_TOKENS = 50      # 10% –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞
TOP_K = 5                      # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

# LLM –º–æ–¥–µ–ª—å
LLM_MODEL_NAME = "qwen2.5:14b-instruct-q4_K_M"
LLM_MAX_TOKENS = 1024          # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –æ—Ç–≤–µ—Ç–∞

# –ü—É—Ç–∏
DATA_DIR = "./data"
CHROMA_DIR = "./chroma_db"
METADATA_DB = "./data/metadata.db"
```

**–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- –û—Ç–∫—Ä–æ–π—Ç–µ [src/config.py](src/config.py)
- –ò–∑–º–µ–Ω–∏—Ç–µ –Ω—É–∂–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

---

## üìö –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

#### –î–≤–∞ —Ç–∏–ø–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

**1. –û–¥–∏–Ω —Ñ–∞–π–ª = –æ–¥–Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è**
- –ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ ‚Üí –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- –í–µ—Å—å —Ç–µ–∫—Å—Ç ‚Üí –æ–¥–Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–æ–ª—å—à–∏—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏

–ü—Ä–∏–º–µ—Ä:
```
–§–∞–π–ª: –ù–∞—Å—Ç—Ä–æ–π–∫–∞_–ï–ì–ê–ò–°_—Ñ–∏–ª—å—Ç—Ä–∞.docx
‚Üí –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: "–ù–∞—Å—Ç—Ä–æ–π–∫–∞_–ï–ì–ê–ò–°_—Ñ–∏–ª—å—Ç—Ä–∞"
```

**2. –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π (—Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å `---`)**
- –û–¥–∏–Ω —Ñ–∞–π–ª ‚Üí –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
- –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å: `---` (—Ç—Ä–∏ –¥–µ—Ñ–∏—Å–∞)
- –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ –ø–æ—Å–ª–µ `---` ‚Üí –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

–ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞:
```markdown
–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞ –ï–ì–ê–ò–°

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Ñ–∏–ª—å—Ç—Ä–∞...
1. –®–∞–≥ 1
2. –®–∞–≥ 2

---

–†–µ—à–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∞ –æ—à–∏–±–∫–∞...
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–ª—É–∂–±—É

---

–°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç—á–µ—Ç–∞...
```

–ò–∑ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–æ **3 –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏**.

#### –ü—Ä–æ—Ü–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É **"üìÑ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤"**
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª (.docx, .md, .txt)
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø:
   - "–û–¥–∏–Ω —Ñ–∞–π–ª = –æ–¥–Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è"
   - "–ú–Ω–æ–∂–µ—Å—Ç–≤–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π (—Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å ---)"
4. –£–∫–∞–∂–∏—Ç–µ –∞–≤—Ç–æ—Ä–∞
5. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–≥–∏ –∏–∑ —Å–ø–∏—Å–∫–∞ (–ï–ì–ê–ò–°, 1–°, —Ñ–∏–ª—å—Ç—Ä, –æ—à–∏–±–∫–∞, –∏ –¥—Ä.)
6. –î–æ–±–∞–≤—å—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ–≥–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
7. –ù–∞–∂–º–∏—Ç–µ **"üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç"**

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –†–∞—Å–ø–∞—Ä—Å–∏—Ç —Ñ–∞–π–ª –Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- –ò–∑–≤–ª–µ—á—ë—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –†–∞–∑–æ–±—å—ë—Ç –Ω–∞ —á–∞–Ω–∫–∏
- –°–æ–∑–¥–∞—Å—Ç —ç–º–±–µ–¥–¥–∏–Ω–≥–∏
- –°–æ—Ö—Ä–∞–Ω–∏—Ç –≤ ChromaDB –∏ SQLite

#### –†–∞–±–æ—Ç–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:**
- **.docx** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ inline –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- **.md** - –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É `![alt](path/to/image.png)`

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
2. –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `data/images/` —Å –∏–º–µ–Ω–∞–º–∏ `{doc_id}_img_N.png`
3. –í —Ç–µ–∫—Å—Ç–µ –∑–∞–º–µ–Ω—è—é—Ç—Å—è –Ω–∞ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã: `[[image: data/images/...]]`
4. –ü—Ä–∏ –ø–æ–∏—Å–∫–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø–æ–¥ –æ—Ç–≤–µ—Ç–æ–º LLM

**–ü—Ä–∏–º–µ—Ä Markdown —Ñ–∞–π–ª–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º:**
```markdown
# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

–°–ª–µ–¥—É–π—Ç–µ —à–∞–≥–∞–º –Ω–∏–∂–µ.

![–ù–∞—Å—Ç—Ä–æ–π–∫–∏](./screenshots/settings.png)

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è.
```

### –ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É **"üîç –ü–æ–∏—Å–∫"**
2. –í–≤–µ–¥–∏—Ç–µ –≤–æ–ø—Ä–æ—Å –≤ –ø–æ–ª–µ –ø–æ–∏—Å–∫–∞
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (top_k) –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏
4. –ù–∞–∂–º–∏—Ç–µ **"üîç –ù–∞–π—Ç–∏"**

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–∏—Å–∫:**
1. –°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞—ë—Ç —ç–º–±–µ–¥–¥–∏–Ω–≥ –≤–∞—à–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
2. –ù–∞—Ö–æ–¥–∏—Ç top_k –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ—Ö–æ–∂–∏—Ö —á–∞–Ω–∫–æ–≤ –≤ ChromaDB
3. –§–æ—Ä–º–∏—Ä—É–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤
4. LLM –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
5. –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —Å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å—é

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- **–û—Ç–≤–µ—Ç LLM** - —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–π –æ—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å
- **–°–≤—è–∑–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ —Ç–æ–ø-1 –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- **–ò—Å—Ç–æ—á–Ω–∏–∫–∏** - —Å–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å—é
  - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä üñºÔ∏è –µ—Å–ª–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
  - –ú–æ–∂–Ω–æ —Ä–∞—Å–∫—Ä—ã—Ç—å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–µ–∫—Å—Ç–∞ —á–∞–Ω–∫–∞

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π

#### –ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π

–í–∫–ª–∞–¥–∫–∞ **"üìä –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π"** –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
  - –ê–∫—Ç–∏–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
  - –ù–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ–≥–æ–≤
- **–§–∏–ª—å—Ç—Ä—ã:**
  - –ü–æ —Ç–µ–≥—É (dropdown)
  - –ü–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (checkbox "–ü–æ–∫–∞–∑–∞—Ç—å –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã–µ")
- **–°–ø–∏—Å–æ–∫ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π** —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏:
  - –ù–∞–∑–≤–∞–Ω–∏–µ
  - –ê–≤—Ç–æ—Ä
  - –¢–µ–≥–∏
  - –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞–Ω–∫–æ–≤

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏

–î–ª—è –∫–∞–∂–¥–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã:
- **–ü–æ–º–µ—Ç–∏—Ç—å –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω–æ–π** - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –Ω–æ –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ —É—Å—Ç–∞—Ä–µ–≤—à–∞—è (–Ω–µ —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ –ø–æ–∏—Å–∫–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- **üóëÔ∏è –£–¥–∞–ª–∏—Ç—å** - –ø–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ ChromaDB –∏ SQLite

#### –û–ø–∞—Å–Ω–∞—è –∑–æ–Ω–∞

**–û—á–∏—Å—Ç–∫–∞ –≤—Å–µ–π –±–∞–∑—ã ChromaDB:**
- –£–¥–∞–ª—è–µ—Ç –≤—Å–µ —á–∞–Ω–∫–∏ –∏–∑ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –ë–î
- SQLite –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é!

### –°–∏—Å—Ç–µ–º–∞ —Ç–µ–≥–æ–≤

#### –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ç–µ–≥–∏
- –ï–ì–ê–ò–°
- 1–°
- —Ñ–∏–ª—å—Ç—Ä
- –æ—à–∏–±–∫–∞
- –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- –æ—Ç—á–µ—Ç
- —É—Å—Ç–∞–Ω–æ–≤–∫–∞
- –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- –∏–º–ø–æ—Ä—Ç
- —ç–∫—Å–ø–æ—Ä—Ç

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–æ–≤
1. **–í—ã–±–æ—Ä –∏–∑ —Å–ø–∏—Å–∫–∞** - multiselect –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ç–µ–≥–∏** - –ø–æ–ª–µ "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ–≥–∏" (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)

–ü—Ä–∏–º–µ—Ä:
- –í—ã–±—Ä–∞–Ω–æ: `–ï–ì–ê–ò–°`, `—Ñ–∏–ª—å—Ç—Ä`
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: `–Ω–∞—Å—Ç—Ä–æ–π–∫–∞_2024, –≤–∞–∂–Ω–æ–µ`
- –ò—Ç–æ–≥–æ: `–ï–ì–ê–ò–°`, `—Ñ–∏–ª—å—Ç—Ä`, `–Ω–∞—Å—Ç—Ä–æ–π–∫–∞_2024`, `–≤–∞–∂–Ω–æ–µ`

#### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–µ–≥–∞–º

–í —Ä–∞–∑–¥–µ–ª–µ "–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π":
```
–§–∏–ª—å—Ç—Ä –ø–æ —Ç–µ–≥—É: –ï–ì–ê–ò–° ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —Å —Ç–µ–≥–æ–º "–ï–ì–ê–ò–°"
```

---

## üß† –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è –±–∞–∑–∞

### –ß—Ç–æ —Ç–∞–∫–æ–µ RAG?

**RAG (Retrieval-Augmented Generation)** - –ø–æ–¥—Ö–æ–¥ –∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –∫–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç:
1. **Retrieval** - –ø–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
2. **Generation** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ RAG:**
- LLM –Ω–µ "–≥–∞–ª–ª—é—Ü–∏–Ω–∏—Ä—É–µ—Ç" - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç fine-tuning –º–æ–¥–µ–ª–∏
- –õ–µ–≥–∫–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –±–∞–∑—É –∑–Ω–∞–Ω–∏–π
- –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å - –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏

### –í–µ–∫—Ç–æ—Ä–Ω—ã–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏

**–ß—Ç–æ —ç—Ç–æ?**
–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –≤ –≤–µ–∫—Ç–æ—Ä (–º–∞—Å—Å–∏–≤ —á–∏—Å–µ–ª) —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–∏.

**–ü—Ä–∏–º–µ—Ä:**
```
–¢–µ–∫—Å—Ç: "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞ –ï–ì–ê–ò–°"
‚Üí –≠–º–±–µ–¥–¥–∏–Ω–≥: [0.123, -0.456, 0.789, ..., 0.234]  (1024 —á–∏—Å–ª–∞)
```

**–°–≤–æ–π—Å—Ç–≤–∞ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤:**
- –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Ö–æ–∂–∏–µ —Ç–µ–∫—Å—Ç—ã ‚Üí –±–ª–∏–∑–∫–∏–µ –≤–µ–∫—Ç–æ—Ä—ã
- –ú–æ–∂–Ω–æ –∏–∑–º–µ—Ä—è—Ç—å "–ø–æ—Ö–æ–∂–µ—Å—Ç—å" —á–µ—Ä–µ–∑ –∫–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ
- –ú–æ–¥–µ–ª—å –æ–±—É—á–µ–Ω–∞ –Ω–∞ –º–∏–ª–ª–∏–æ–Ω–∞—Ö –ø—Ä–∏–º–µ—Ä–æ–≤

**–ú–æ–¥–µ–ª—å: intfloat/multilingual-e5-large**
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** BERT-based encoder
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** ~560M
- **–†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å:** 1024
- **–Ø–∑—ã–∫–∏:** –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–∞—è (–≤–∫–ª—é—á–∞—è —Ä—É—Å—Å–∫–∏–π)
- **–û–±—É—á–µ–Ω–∏–µ:** –ö–æ–Ω—Ç—Ä–∞—Å—Ç–∏–≤–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –Ω–∞ retrieval –∑–∞–¥–∞—á–∞—Ö

### –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫

**–ü—Ä–∏–Ω—Ü–∏–ø:**
1. –í—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã ‚Üí –≤–µ–∫—Ç–æ—Ä—ã (—ç–º–±–µ–¥–¥–∏–Ω–≥–∏)
2. –ó–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Üí –≤–µ–∫—Ç–æ—Ä
3. –ü–æ–∏—Å–∫ –±–ª–∏–∂–∞–π—à–∏—Ö —Å–æ—Å–µ–¥–µ–π (nearest neighbors) –≤ –≤–µ–∫—Ç–æ—Ä–Ω–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ

**–ú–µ—Ç—Ä–∏–∫–∞ –ø–æ—Ö–æ–∂–µ—Å—Ç–∏:**
```
–ö–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ = 1 - (A ¬∑ B) / (||A|| √ó ||B||)
```
- 0 = –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–µ –≤–µ–∫—Ç–æ—Ä—ã
- 1 = –æ—Ä—Ç–æ–≥–æ–Ω–∞–ª—å–Ω—ã–µ (–Ω–∏–∫–∞–∫ –Ω–µ —Å–≤—è–∑–∞–Ω—ã)
- 2 = –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ

**–ò–Ω–¥–µ–∫—Å HNSW:**
ChromaDB –∏—Å–ø–æ–ª—å–∑—É–µ—Ç HNSW (Hierarchical Navigable Small World) –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ approximate nearest neighbor search.

### LLM –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

**–ú–æ–¥–µ–ª—å: Qwen2.5 14B Instruct**
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** Decoder-only Transformer (GPT-–ø–æ–¥–æ–±–Ω–∞—è)
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** 14 –º–∏–ª–ª–∏–∞—Ä–¥–æ–≤
- **–ö–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏—è:** Q4_K_M (4-bit)
- **–†–∞–∑–º–µ—Ä:** ~8GB
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –æ–∫–Ω–æ:** 8192 —Ç–æ–∫–µ–Ω–æ–≤
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
  - Instruction-tuned (–æ–±—É—á–µ–Ω–∞ –Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è—Ö)
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
  - –†–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ Ollama

**Autoregressive –≥–µ–Ω–µ—Ä–∞—Ü–∏—è:**
–ú–æ–¥–µ–ª—å –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π —Ç–æ–∫–µ–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö:
```
–í–æ–ø—Ä–æ—Å: "–ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä?"
‚Üí –¢–æ–∫–µ–Ω 1: "–î–ª—è"
‚Üí –¢–æ–∫–µ–Ω 2: "–Ω–∞—Å—Ç—Ä–æ–π–∫–∏"
‚Üí –¢–æ–∫–µ–Ω 3: "—Ñ–∏–ª—å—Ç—Ä–∞"
‚Üí ...
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:**
- **Temperature** (0.0-1.0):
  - 0.0 = –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ (–≤—Å–µ–≥–¥–∞ —Å–∞–º—ã–π –≤–µ—Ä–æ—è—Ç–Ω—ã–π —Ç–æ–∫–µ–Ω)
  - 1.0 = –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ (–±–æ–ª—å—à–µ —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏)
  - RAG –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 0.3 –¥–ª—è –±–∞–ª–∞–Ω—Å–∞ —Ç–æ—á–Ω–æ—Å—Ç–∏ –∏ –≤–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏

- **Max tokens**: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –æ—Ç–≤–µ—Ç–∞ (1024)

### –ß–∞–Ω–∫–∏–Ω–≥ (—Ä–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ –∫—É—Å–∫–∏)

**–ó–∞—á–µ–º –Ω—É–∂–µ–Ω?**
1. –ú–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –∏–º–µ–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –¥–ª–∏–Ω—É (512 —Ç–æ–∫–µ–Ω–æ–≤)
2. –ú–∞–ª–µ–Ω—å–∫–∏–µ —á–∞–Ω–∫–∏ = —Ç–æ—á–Ω–µ–µ –ø–æ–∏—Å–∫ (–º–µ–Ω—å—à–µ —à—É–º–∞)
3. Overlap (–ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ) = –Ω–µ —Ç–µ—Ä—è–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–∞—Ö

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
```python
def split_text(text, max_length=500, overlap=50):
    chunks = []
    start = 0
    while start < len(text):
        end = start + max_length
        chunk = text[start:end]
        chunks.append(chunk)
        start += max_length - overlap  # –°–¥–≤–∏–≥ —Å –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ–º
    return chunks
```

**–ü—Ä–∏–º–µ—Ä:**
```
–¢–µ–∫—Å—Ç: "0123456789ABCDEFGHIJ" (20 —Å–∏–º–≤–æ–ª–æ–≤)
max_length=10, overlap=3

–ß–∞–Ω–∫ 1: "0123456789" (0-10)
–ß–∞–Ω–∫ 2: "789ABCDEFG" (7-17)  ‚Üê –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ "789"
–ß–∞–Ω–∫ 3: "EFGHIJ" (14-20)
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
- `CHUNK_SIZE_TOKENS = 500` (~2000 —Å–∏–º–≤–æ–ª–æ–≤)
- `CHUNK_OVERLAP_TOKENS = 50` (10% –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ)

### –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫

**–ü—Ä–æ–±–ª–µ–º–∞:**
–í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –ø–ª–æ—Ö –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è —Ç–µ—Ä–º–∏–Ω–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–æ—à–∏–±–∫–∞ 409").

**–†–µ—à–µ–Ω–∏–µ:**
–ö–æ–º–±–∏–Ω–∞—Ü–∏—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ + BM25 (—Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º).

**BM25:**
- TF-IDF –ø–æ–¥–æ–±–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º
- –•–æ—Ä–æ—à–æ –Ω–∞—Ö–æ–¥–∏—Ç —Ç–æ—á–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è —Å–ª–æ–≤
- –£—á–∏—Ç—ã–≤–∞–µ—Ç —á–∞—Å—Ç–æ—Ç—É —Ç–µ—Ä–º–∏–Ω–∞ –∏ –¥–ª–∏–Ω—É –¥–æ–∫—É–º–µ–Ω—Ç–∞

**–§–æ—Ä–º—É–ª–∞ BM25:**
```
score(D, Q) = Œ£ IDF(qi) √ó (f(qi, D) √ó (k1 + 1)) / (f(qi, D) + k1 √ó (1 - b + b √ó |D| / avgdl))
```
–≥–¥–µ:
- `f(qi, D)` - —á–∞—Å—Ç–æ—Ç–∞ —Ç–µ—Ä–º–∏–Ω–∞ qi –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ D
- `|D|` - –¥–ª–∏–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- `avgdl` - —Å—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- `k1`, `b` - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–æ–±—ã—á–Ω–æ 1.5 –∏ 0.75)

**–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```
hybrid_score = 0.5 √ó semantic_score_norm + 0.5 √ó bm25_score_norm
```

### –ü—Ä–æ–º–ø—Ç-–∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥

**System prompt –¥–ª—è RAG:**
```
–¢—ã ‚Äî –ø–æ–º–æ—â–Ω–∏–∫ –ø–æ –ø–æ–∏—Å–∫—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π.

–í–ê–ñ–ù–´–ï –ü–†–ê–í–ò–õ–ê:
1. –ò—Å–ø–æ–ª—å–∑—É–π –¢–û–õ–¨–ö–û –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
2. –ï—Å–ª–∏ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –Ω–µ—Ç –æ—Ç–≤–µ—Ç–∞ ‚Äî —Å–∫–∞–∂–∏ "–í –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π –Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏"
3. –ù–µ –ø—Ä–∏–¥—É–º—ã–≤–∞–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
4. –û—Ç–≤–µ—á–∞–π —á–µ—Ç–∫–æ, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ
5. –ï—Å–ª–∏ –≤–∏–¥–∏—à—å [[image: –ø—É—Ç—å]] ‚Äî —É–ø–æ–º—è–Ω–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –æ—Ç–≤–µ—Ç–µ
```

**User prompt:**
```
–ö–û–ù–¢–ï–ö–°–¢ –ò–ó –ë–ê–ó–´ –ó–ù–ê–ù–ò–ô:
[–î–æ–∫—É–º–µ–Ω—Ç 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞]
–¢–µ–∫—Å—Ç —á–∞–Ω–∫–∞ 1...
---
[–î–æ–∫—É–º–µ–Ω—Ç 2: –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è]
–¢–µ–∫—Å—Ç —á–∞–Ω–∫–∞ 2...

–í–û–ü–†–û–° –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø:
–ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä –ï–ì–ê–ò–°?

–û–¢–í–ï–¢ (–∏—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤—ã—à–µ):
```

---

## üîß –î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ö–ª—é—á–µ–≤—ã–µ –º–æ–¥—É–ª–∏

#### [src/embeddings.py](src/embeddings.py) - –ú–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤

```python
class EmbeddingModel:
    def __init__(self, model_name="intfloat/multilingual-e5-large"):
        self.model = SentenceTransformer(model_name)
        # –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —Å–∫–∞—á–∏–≤–∞–µ—Ç –º–æ–¥–µ–ª—å –≤ ~/.cache/

    def encode(self, texts):
        return self.model.encode(texts, convert_to_numpy=True)
        # texts: List[str] –∏–ª–∏ str
        # return: numpy array —Ñ–æ—Ä–º—ã (N, 1024)
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –¢–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ (—Ä–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ —Ç–æ–∫–µ–Ω—ã)
2. –ü—Ä–æ–≥–æ–Ω —á–µ—Ä–µ–∑ Transformer (12 —Å–ª–æ—ë–≤ BERT)
3. Pooling (—É—Å—Ä–µ–¥–Ω–µ–Ω–∏–µ) –≤—ã—Ö–æ–¥–æ–≤ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–ª–æ—è
4. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤–µ–∫—Ç–æ—Ä–∞

#### [src/storage.py](src/storage.py) - ChromaDB

```python
def get_chroma():
    client = chromadb.PersistentClient(path=CHROMA_DIR)
    collection = client.get_or_create_collection("documents")
    return client, collection
```

**–ú–µ—Ç–æ–¥—ã –∫–æ–ª–ª–µ–∫—Ü–∏–∏:**

**–î–æ–±–∞–≤–ª–µ–Ω–∏–µ:**
```python
collection.add(
    documents=["—Ç–µ–∫—Å—Ç —á–∞–Ω–∫–∞ 1", "—Ç–µ–∫—Å—Ç —á–∞–Ω–∫–∞ 2"],
    embeddings=[[0.1, 0.2, ...], [0.3, 0.4, ...]],
    metadatas=[
        {"instruction_id": "uuid", "title": "–ù–∞–∑–≤–∞–Ω–∏–µ", "tags": "–ï–ì–ê–ò–°,—Ñ–∏–ª—å—Ç—Ä"},
        {...}
    ],
    ids=["uuid_chunk_0", "uuid_chunk_1"]
)
```

**–ü–æ–∏—Å–∫:**
```python
results = collection.query(
    query_embeddings=[[0.5, 0.6, ...]],  # –≤–µ–∫—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–∞
    n_results=5,                          # TOP-5
    where={"active": True}                # —Ñ–∏–ª—å—Ç—Ä –ø–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º
)
```

**–í–æ–∑–≤—Ä–∞—Ç:**
```python
{
    'documents': [["—Ç–µ–∫—Å—Ç —á–∞–Ω–∫–∞ 3", "—Ç–µ–∫—Å—Ç —á–∞–Ω–∫–∞ 1", ...]],
    'metadatas': [[{...}, {...}]],
    'distances': [[0.12, 0.34, ...]]  # –∫–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ
}
```

#### [src/llm_client.py](src/llm_client.py) - LLM –∫–ª–∏–µ–Ω—Ç

```python
class LLMClient:
    def __init__(self, model_name="qwen2.5:14b-instruct-q4_K_M"):
        self.model_name = model_name
        self._verify_model()  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –º–æ–¥–µ–ª–∏ –≤ Ollama

    def generate_rag_answer(self, query: str, context: str) -> str:
        system_prompt = "–¢—ã –ø–æ–º–æ—â–Ω–∏–∫ –ø–æ –ø–æ–∏—Å–∫—É..."

        prompt = f"""–ö–û–ù–¢–ï–ö–°–¢:
{context}

–í–û–ü–†–û–°: {query}

–û–¢–í–ï–¢:"""

        response = ollama.chat(
            model=self.model_name,
            messages=[
                {'role': 'system', 'content': system_prompt},
                {'role': 'user', 'content': prompt}
            ],
            options={
                'num_predict': 1024,
                'temperature': 0.3
            }
        )

        return response['message']['content']
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Ollama:**
1. –õ–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –Ω–∞ `localhost:11434`
2. –ú–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –≤ –ø–∞–º—è—Ç—å (~8GB RAM)
3. POST –∑–∞–ø—Ä–æ—Å –∫ `/api/chat`
4. Autoregressive –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω –∑–∞ —Ç–æ–∫–µ–Ω–æ–º
5. –í–æ–∑–≤—Ä–∞—Ç –ø–æ–ª–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞

#### [src/docs_parser.py](src/docs_parser.py) - –ü–∞—Ä—Å–∏–Ω–≥ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

**–ß—Ç–µ–Ω–∏–µ .docx:**
```python
from docx import Document

def read_docx(file_path: str) -> str:
    doc = Document(file_path)
    text = "\n".join(p.text for p in doc.paragraphs)
    return text
```

**–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ .docx:**
```python
def extract_images_from_docx(doc_path: str, doc_id: str) -> Tuple[str, List[str]]:
    doc = Document(doc_path)
    images = []
    modified_text = ""

    for para in doc.paragraphs:
        # –ü–æ–∏—Å–∫ inline –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–µ
        for run in para.runs:
            for drawing in run.element.findall('.//a:blip', namespaces):
                rId = drawing.get('{...}embed')
                image_part = doc.part.related_parts[rId]

                # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                image_path = f"data/images/{doc_id}_img_{counter}.png"
                with open(image_path, 'wb') as f:
                    f.write(image_part.blob)

                images.append(image_path)
                modified_text += f"[[image: {image_path}]]"

        modified_text += para.text + "\n"

    return modified_text, images
```

**–ü–∞—Ä—Å–∏–Ω–≥ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π:**
```python
def parse_multi_instructions(file_path: str, separator='---'):
    text = read_file(file_path)
    sections = text.split(separator)

    instructions = []
    for section in sections:
        lines = section.strip().split('\n')
        title = lines[0].strip()  # –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ = –Ω–∞–∑–≤–∞–Ω–∏–µ
        content = '\n'.join(lines[1:])  # –û—Å—Ç–∞–ª—å–Ω–æ–µ = —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ

        instructions.append({
            'title': title,
            'content': content
        })

    return instructions
```

#### [src/metadata_manager.py](src/metadata_manager.py) - SQLite –±–∞–∑–∞

**–°—Ö–µ–º–∞ –ë–î:**
```sql
-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
CREATE TABLE instructions (
    id TEXT PRIMARY KEY,
    doc_id TEXT,
    title TEXT,
    file_path TEXT,
    file_format TEXT,
    source_type TEXT,
    separator_index INTEGER,
    author TEXT,
    active BOOLEAN DEFAULT 1,
    created_at TIMESTAMP,
    updated_at TIMESTAMP
);

-- –¢–µ–≥–∏
CREATE TABLE tags (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT UNIQUE NOT NULL
);

-- –°–≤—è–∑—å many-to-many
CREATE TABLE instruction_tags (
    instruction_id TEXT,
    tag_id INTEGER,
    FOREIGN KEY (instruction_id) REFERENCES instructions(id),
    FOREIGN KEY (tag_id) REFERENCES tags(id)
);

-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
CREATE TABLE instruction_images (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    instruction_id TEXT,
    image_path TEXT,
    FOREIGN KEY (instruction_id) REFERENCES instructions(id)
);
```

**–ö–ª–∞—Å—Å MetadataManager:**
```python
class MetadataManager:
    def add_instruction(self, instruction_id, title, tags, ...):
        # 1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
        conn.execute("""
            INSERT INTO instructions (id, title, ...)
            VALUES (?, ?, ...)
        """, (instruction_id, title, ...))

        # 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–æ–≤ (many-to-many)
        for tag in tags:
            tag_id = self._get_or_create_tag(tag)
            conn.execute("""
                INSERT INTO instruction_tags (instruction_id, tag_id)
                VALUES (?, ?)
            """, (instruction_id, tag_id))

    def get_instructions_by_tag(self, tag_name):
        return conn.execute("""
            SELECT i.* FROM instructions i
            JOIN instruction_tags it ON i.id = it.instruction_id
            JOIN tags t ON it.tag_id = t.id
            WHERE t.name = ?
        """, (tag_name,)).fetchall()
```

#### [src/rag_pipeline.py](src/rag_pipeline.py) - –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞

**–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:**
```python
class RAGPipeline:
    def __init__(self):
        self.embedding_model = EmbeddingModel()      # ~560MB
        self.client, self.collection = get_chroma()  # ChromaDB
        self.llm_client = get_llm_client()           # Ollama
```

**–ú–µ—Ç–æ–¥ query:**
```python
def query(self, user_query: str, top_k: int = 5) -> Dict:
    # 1. –ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
    documents = self.search_similar(user_query, top_k=top_k)

    # 2. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
    context, sources, images, best_instruction_id = self.format_context(documents)

    # 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞
    answer = self.llm_client.generate_rag_answer(query=user_query, context=context)

    return {
        'answer': answer,
        'sources': sources,
        'images': images,
        'best_instruction_id': best_instruction_id
    }
```

**–í—ã–±–æ—Ä —Ç–æ–ø-1 –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:**
```python
# –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –¥–æ–∫—É–º–µ–Ω—Ç—ã –ø–æ instruction_id
instruction_scores = defaultdict(list)
for doc in documents:
    instruction_id = doc['metadata']['instruction_id']
    distance = doc['distance']
    instruction_scores[instruction_id].append(distance)

# –ù–∞—Ö–æ–¥–∏–º instruction_id —Å –Ω–∞–∏–º–µ–Ω—å—à–∏–º —Å—Ä–µ–¥–Ω–∏–º distance
best_instruction_id = min(
    instruction_scores.keys(),
    key=lambda iid: sum(instruction_scores[iid]) / len(instruction_scores[iid])
)

# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¢–û–õ–¨–ö–û –∏–∑ —Ç–æ–ø-1 –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
all_images = []
for doc in documents:
    if doc['metadata']['instruction_id'] == best_instruction_id:
        all_images.extend(doc['metadata']['images'])
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

#### 1. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Streamlit

```python
@st.cache_resource
def get_rag_pipeline():
    return RAGPipeline()
```

**–ó–∞—á–µ–º:**
- RAGPipeline –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑
- –ú–æ–¥–µ–ª–∏ –Ω–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ UI
- –≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏ –∏ –ø–∞–º—è—Ç–∏

#### 2. –ü–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ (overlap) –≤ —á–∞–Ω–∫–∞—Ö

**–ë–µ–∑ overlap:**
```
–ß–∞–Ω–∫ 1: "...–≤–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–∞ –∫–æ–Ω—Ü–µ"
–ß–∞–Ω–∫ 2: "–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –≤–∞–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏..."
```
–ü–æ–∏—Å–∫ –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —á–∞–Ω–∫ –∏ –ø–æ—Ç–µ—Ä—è—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç.

**–° overlap:**
```
–ß–∞–Ω–∫ 1: "...–≤–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–∞ –∫–æ–Ω—Ü–µ"
–ß–∞–Ω–∫ 2: "–Ω–∞ –∫–æ–Ω—Ü–µ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –≤–∞–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏..."
       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ
```
–û–±–∞ —á–∞–Ω–∫–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç.

#### 3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –≤ —á–∞–Ω–∫–∏

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ó–∞–ø—Ä–æ—Å: "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞ –ï–ì–ê–ò–°"
–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏: "–û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏..." (–Ω–µ—Ç —Å–ª–æ–≤ "—Ñ–∏–ª—å—Ç—Ä" –∏ "–ï–ì–ê–ò–°")
‚Üí –ü–æ–∏—Å–∫ –Ω–µ –Ω–∞–π–¥—ë—Ç, —Ö–æ—Ç—è –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–∏—Ç.

**–†–µ—à–µ–Ω–∏–µ:**
```python
def prepare_text_for_chunking(text, title):
    return f"–î–æ–∫—É–º–µ–Ω—Ç: {title}\n\n{text}"
```

–¢–µ–ø–µ—Ä—å –∫–∞–∂–¥—ã–π —á–∞–Ω–∫ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ ‚Üí –ø–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç.

#### 4. Temperature –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏

```python
temperature = 0.3  # –ù–∏–∑–∫–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞
```

**–≠—Ñ—Ñ–µ–∫—Ç:**
- –ú–æ–¥–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã
- –ú–µ–Ω—å—à–µ –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π
- –ë–æ–ª–µ–µ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ –æ—Ç–≤–µ—Ç—ã

#### 5. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è scores –≤ –≥–∏–±—Ä–∏–¥–Ω–æ–º –ø–æ–∏—Å–∫–µ

**–ü—Ä–æ–±–ª–µ–º–∞:**
- Semantic distance: 0-2
- BM25 score: 0-100

–ï—Å–ª–∏ –ø—Ä–æ—Å—Ç–æ —Å–ª–æ–∂–∏—Ç—å, BM25 "–∑–∞–¥–∞–≤–∏—Ç" semantic.

**–†–µ—à–µ–Ω–∏–µ:**
```python
def normalize(scores):
    min_s, max_s = min(scores), max(scores)
    return [(s - min_s) / (max_s - min_s) for s in scores]
```

–ü—Ä–∏–≤–æ–¥–∏–º –∫ –¥–∏–∞–ø–∞–∑–æ–Ω—É [0, 1] –¥–ª—è –æ–±–æ–∏—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤.

---

## üë®‚Äçüíª –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

#### –ü—Ä–∏–Ω—Ü–∏–ø—ã

1. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å** - –∫–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ—é –æ–±–ª–∞—Å—Ç—å
2. **–°–ª–∞–±–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å** - –º–æ–¥—É–ª–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç —á–µ—Ä–µ–∑ —á—ë—Ç–∫–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
3. **DRY** (Don't Repeat Yourself) - –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–¥
4. **Type hints** - –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤ –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏

#### –°—Ç–∏–ª—å –∫–æ–¥–∞

```python
from typing import List, Dict, Tuple

def function_name(
    param1: str,
    param2: int = 5,
    param3: bool = True
) -> Dict[str, any]:
    """
    –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏.

    Args:
        param1: –û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
        param2: –û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5)
        param3: –û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é True)

    Returns:
        –°–ª–æ–≤–∞—Ä—å —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
    """
    # –ö–æ–¥
    return {'result': 'value'}
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

#### –ü—Ä–∏–º–µ—Ä: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ PDF

**1. –û–±–Ω–æ–≤–∏—Ç—å [src/docs_parser.py](src/docs_parser.py):**

```python
from pdfminer.high_level import extract_text as pdf_extract_text

def read_pdf(file_path: str) -> str:
    return pdf_extract_text(file_path)

def extract_text(file_path: str) -> str:
    ext = os.path.splitext(file_path)[1].lower()

    if ext == ".pdf":
        return read_pdf(file_path)
    # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
```

**2. –û–±–Ω–æ–≤–∏—Ç—å [src/app.py](src/app.py):**

```python
uploaded_file = st.file_uploader(
    "–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª",
    type=['docx', 'md', 'txt', 'pdf']  # –î–æ–±–∞–≤–∏—Ç—å 'pdf'
)
```

**3. –û–±–Ω–æ–≤–∏—Ç—å [requirements.txt](requirements.txt):**

```
pdfminer.six>=20211012
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `tests/test_docs_parser.py`:

```python
import pytest
from src.docs_parser import extract_text

def test_read_txt():
    text = extract_text('tests/fixtures/sample.txt')
    assert len(text) > 0
    assert isinstance(text, str)

def test_read_docx():
    text = extract_text('tests/fixtures/sample.docx')
    assert "–æ–∂–∏–¥–∞–µ–º—ã–π —Ç–µ–∫—Å—Ç" in text
```

–ó–∞–ø—É—Å–∫:
```bash
pytest tests/
```

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

```python
def test_full_pipeline():
    # 1. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    rag = create_rag_pipeline()

    # 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    # ...

    # 3. –ü–æ–∏—Å–∫
    result = rag.query("—Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å")

    # 4. –ü—Ä–æ–≤–µ—Ä–∫–∏
    assert result['answer'] is not None
    assert len(result['sources']) > 0
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å `logging`:

```python
import logging

logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    handlers=[
        logging.FileHandler('logs/app.log'),
        logging.StreamHandler()
    ]
)

logger = logging.getLogger(__name__)

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
logger.info("–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è RAG pipeline")
logger.warning("–ú–æ–¥–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞")
logger.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞", exc_info=True)
```

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

#### Multimodal LLM (–±—É–¥—É—â–µ–µ)

–î–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (OCR, –æ–ø–∏—Å–∞–Ω–∏–µ):

```python
# –ó–∞–º–µ–Ω–∏—Ç—å Qwen2.5 –Ω–∞ multimodal –º–æ–¥–µ–ª—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, LLaVA)
LLM_MODEL_NAME = "llava:13b"

# –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ LLM
def generate_answer_with_images(query, context, images):
    # –ö–æ–¥ –¥–ª—è multimodal –ø—Ä–æ–º–ø—Ç–∞
    pass
```

#### –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π

–£–∂–µ –≥–æ—Ç–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤ `instruction_history`:

```python
class MetadataManager:
    def update_instruction(self, instruction_id, new_content):
        # 1. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é –≤ instruction_history
        old_version = self.get_instruction(instruction_id)
        conn.execute("""
            INSERT INTO instruction_history (instruction_id, title, content, version, updated_at)
            VALUES (?, ?, ?, ?, ?)
        """, (instruction_id, old_version['title'], old_version['content'], old_version['version'], datetime.now()))

        # 2. –û–±–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—É—â—É—é –≤–µ—Ä—Å–∏—é
        # ...
```

#### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞ –ø–æ —Ç–µ–≥–∞–º

```python
# –í RAGPipeline.search_similar()
where_filter = {
    "active": True,
    "tags": {"$contains": "–ï–ì–ê–ò–°"}  # –ü–æ–∏—Å–∫ —Ç–æ–ª—å–∫–æ —Å —Ç–µ–≥–æ–º –ï–ì–ê–ò–°
}

results = self.collection.query(
    query_embeddings=[query_embedding],
    n_results=top_k,
    where=where_filter
)
```

---

## üìÖ Roadmap

### ‚úÖ –ó–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

1. **–ë–∞–∑–æ–≤–∞—è RAG —Å–∏—Å—Ç–µ–º–∞**
   - –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –≤ ChromaDB
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ Qwen2.5
   - Streamlit UI

2. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤**
   - –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ multilingual-e5-large (1024 –∏–∑–º–µ—Ä–µ–Ω–∏—è)
   - –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ª—É—á—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞

3. **–°–∏—Å—Ç–µ–º–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ .docx, .md, .txt
   - –î–≤–∞ —Ç–∏–ø–∞: single_file –∏ multi_instruction
   - –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å `---` –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π

4. **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏ SQLite**
   - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `metadata.db`
   - –•—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
   - –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –∫–∞–∂–¥—ã–π —á–∞–Ω–∫

5. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑ .docx –∏ .md
   - –ó–∞–º–µ–Ω–∞ –Ω–∞ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã `[[image: –ø—É—Ç—å]]`
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `data/images/`
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ UI (–ø–æ 2 –≤ —Ä—è–¥)
   - LLM —É–ø–æ–º–∏–Ω–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –æ—Ç–≤–µ—Ç–∞—Ö

6. **–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π**
   - –í–∫–ª–∞–¥–∫–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–µ–≥–∞–º –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
   - –ü–æ–º–µ—Ç–∫–∞ –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏
   - –£–¥–∞–ª–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π

7. **–°–∏—Å—Ç–µ–º–∞ —Ç–µ–≥–æ–≤**
   - Many-to-many –≤ SQLite
   - 10 –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Ç–µ–≥–æ–≤
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ç–µ–≥–∏
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤ UI

### üî≤ –¢–µ–∫—É—â–∏–µ –∑–∞–¥–∞—á–∏

8. **–î–æ–æ–±—É—á–µ–Ω–∏–µ/—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∑–Ω–∞–Ω–∏–π –º–æ–¥–µ–ª–∏**
   - –°–ª–æ–≤–∞—Ä—å —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤ (–î–î–°, –î–ö/DK, RW –∏ —Ç.–¥.)
   - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è LLM –æ —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏–∏ —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∏
   - –í–∞—Ä–∏–∞–Ω—Ç—ã:
     - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ–≤–∞—Ä—è –≤ system prompt
     - Fine-tuning —ç–º–±–µ–¥–¥–∏–Ω–≥ –º–æ–¥–µ–ª–∏ (—Ç—Ä–µ–±—É–µ—Ç –¥–∞–Ω–Ω—ã—Ö)

9. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è**
   - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
   - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π (–≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–æ)
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞ –ø–æ —Ç–µ–≥–∞–º
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ LLM

### üéØ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

10. **Multimodal LLM**
    - –ê–Ω–∞–ª–∏–∑ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    - OCR –¥–ª—è —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö
    - –ú–æ–¥–µ–ª–∏: LLaVA, GPT-4V

11. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞**
    - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
    - –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤
    - A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤

12. **REST API**
    - FastAPI –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
    - –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã: /search, /add_document, /get_stats

13. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥—Ä—É–≥–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤**
    - PDF —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
    - HTML –¥–æ–∫—É–º–µ–Ω—Ç—ã
    - Excel —Ç–∞–±–ª–∏—Ü—ã

14. **–£–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞**
    - Reranking –º–æ–¥–µ–ª–µ–π –¥–ª—è –ø–µ—Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    - –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —á–∞–Ω–∫–∏–Ω–≥ —Å —É—á—ë—Ç–æ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞
    - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∞–Ω–∞–ª–æ–≥–∞–º–∏

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | RAG Search | ChatGPT | Elastic Search | Confluence |
|----------------|------------|---------|----------------|------------|
| **–õ–æ–∫–∞–ª—å–Ω–æ—Å—Ç—å** | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é | ‚ùå –û–±–ª–∞—á–Ω—ã–π | ‚úÖ –ú–æ–∂–Ω–æ | ‚ö†Ô∏è –û–±—ã—á–Ω–æ –æ–±–ª–∞—á–Ω—ã–π |
| **–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å** | ‚úÖ –í—ã—Å–æ–∫–∞—è | ‚ùå –ù–∏–∑–∫–∞—è | ‚úÖ –í—ã—Å–æ–∫–∞—è | ‚ö†Ô∏è –°—Ä–µ–¥–Ω—è—è |
| **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫** | ‚úÖ –î–∞ | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç | ‚ùå –ù–µ—Ç |
| **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤** | ‚úÖ –î–∞ | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç | ‚ùå –ù–µ—Ç |
| **–°—Ç–æ–∏–º–æ—Å—Ç—å** | ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ | ‚ùå $20/–º–µ—Å | ‚ö†Ô∏è –°–ª–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å | ‚ùå –ü–ª–∞—Ç–Ω–æ |
| **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥ –ø—Ä–µ–¥–º–µ—Ç–Ω—É—é –æ–±–ª–∞—Å—Ç—å** | ‚úÖ –õ–µ–≥–∫–æ | ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ | ‚úÖ –ì–∏–±–∫–æ | ‚ö†Ô∏è –°—Ä–µ–¥–Ω–µ |
| **–†–∞–±–æ—Ç–∞ –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞** | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç |
| **–†—É—Å—Å–∫–∏–π —è–∑—ã–∫** | ‚úÖ –û—Ç–ª–∏—á–Ω–æ | ‚úÖ –û—Ç–ª–∏—á–Ω–æ | ‚ö†Ô∏è –•–æ—Ä–æ—à–æ | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** | ‚úÖ –î–∞ | ‚úÖ –î–∞ (–ø–ª–∞—Ç–Ω–æ) | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |
| **–°–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è** | ‚ö†Ô∏è –°—Ä–µ–¥–Ω—è—è | ‚úÖ –ü—Ä–æ—Å—Ç–∞—è | ‚ùå –°–ª–æ–∂–Ω–∞—è | ‚úÖ –ü—Ä–æ—Å—Ç–∞—è |

---

## üìù Changelog

–°–º. [CHANGELOG.md](CHANGELOG.md)

---

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–ü—Ä–æ–µ–∫—Ç –æ—Ç–∫—Ä—ã—Ç –¥–ª—è —É–ª—É—á—à–µ–Ω–∏–π. –ï—Å–ª–∏ –≤—ã –Ω–∞—à–ª–∏ –±–∞–≥ –∏–ª–∏ —Ö–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é:

1. –°–æ–∑–¥–∞–π—Ç–µ Issue —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã/–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
2. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
3. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É: `git checkout -b feature/your-feature`
4. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –∑–∞–∫–æ–º–º–∏—Ç—å—Ç–µ: `git commit -m "Add feature"`
5. Push –≤ –≤–µ—Ç–∫—É: `git push origin feature/your-feature`
6. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–£—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç. –°–≤–æ–±–æ–¥–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è.

---

## üë§ –ê–≤—Ç–æ—Ä

**–†–∏–Ω–∞—Ç**
- –ü—Ä–æ–µ–∫—Ç: RAG Search
- –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è: –ù–æ—è–±—Ä—å 2024
- –í–µ—Ä—Å–∏—è: 2.0.0

---

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- [Streamlit](https://streamlit.io/) - –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- [ChromaDB](https://www.trychroma.com/) - –í–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- [SentenceTransformers](https://www.sbert.net/) - –ú–æ–¥–µ–ª–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- [Ollama](https://ollama.com/) - –õ–æ–∫–∞–ª—å–Ω—ã–π LLM —Å–µ—Ä–≤–µ—Ä
- [Qwen2.5](https://qwenlm.github.io/) - –Ø–∑—ã–∫–æ–≤–∞—è –º–æ–¥–µ–ª—å
- [LangChain](https://www.langchain.com/) - RAG —Ñ—Ä–µ–π–º–≤–æ—Ä–∫

**–ú–æ–¥–µ–ª–∏:**
- intfloat/multilingual-e5-large - –ú–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- Qwen2.5 14B Instruct - –Ø–∑—ã–∫–æ–≤–∞—è –º–æ–¥–µ–ª—å

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é](USAGE_GUIDE.md)
- [–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π](IMAGE_SUPPORT.md)
- [–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π](CHANGELOG.md)
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é](TESTING_GUIDE.md)

### –í–Ω–µ—à–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã
- [RAG –∫–æ–Ω—Ü–µ–ø—Ü–∏—è](https://arxiv.org/abs/2005.11401)
- [Vector Search](https://www.pinecone.io/learn/vector-search/)
- [Sentence-BERT](https://arxiv.org/abs/1908.10084)
- [Qwen2.5 Technical Report](https://qwenlm.github.io/blog/qwen2.5/)
- [ChromaDB Documentation](https://docs.trychroma.com/)

---

**–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2 –¥–µ–∫–∞–±—Ä—è 2024
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 2.0.0
